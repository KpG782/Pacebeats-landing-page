---
import TermsModal from './TermsModal.astro';
import PrivacyModal from './PrivacyModal.astro';
---

<footer 
    class="w-full bg-black text-white pb-16 px-0" 
    role="contentinfo" 
    aria-label="Site footer"
    itemscope 
    itemtype="https://schema.org/WPFooter"
>
    <div class="w-full max-w-7xl mx-auto px-6">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
            <!-- Left - Logo and Description -->
            <div class="col-span-2 md:col-span-1" 
                 itemscope 
                 itemtype="https://schema.org/Organization">
                <div class="flex items-center mb-4">
                    <img 
                        src="/favicon.png" 
                        alt="Pacebeats Logo" 
                        class="w-8 h-8 mr-3"
                        itemprop="logo"
                        width="32"
                        height="32"
                        loading="lazy"
                        decoding="async"
                    />
                    <h3 class="text-xl font-bold" itemprop="name">Pacebeats</h3>
                </div>
                <p class="text-gray-400 text-sm leading-relaxed mb-6" itemprop="description">
                    Pacebeats is your running companion, syncing every stride with the perfect beat. Train smarter, push further, and let music power your journey, one step at a time.
                </p>
                
                <!-- Buy Me a Coffee Section -->
                <div class="mt-4" role="region" aria-label="Support section">
                    <p class="text-gray-400 text-sm mb-3">Support our development:</p>
                    <a 
                        href="https://buymeacoffee.com/Loki123" 
                        target="_blank" 
                        rel="noopener noreferrer nofollow"
                        class="inline-flex items-center bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded-lg transition-colors text-sm font-medium focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-opacity-50"
                        aria-label="Support Pacebeats development on Buy Me a Coffee - Opens in new tab"
                        itemprop="url"
                    >
                        <span aria-hidden="true">â˜•</span> Buy me a coffee
                    </a>
                </div>
            </div>
            
            <!-- Center - Menu -->
            <nav class="col-span-1 md:col-span-1" 
                 role="navigation" 
                 aria-label="Footer navigation"
                 itemscope 
                 itemtype="https://schema.org/SiteNavigationElement">
                <h4 class="text-white font-semibold mb-4">Menu</h4>
                <ul class="space-y-3" role="list">
                    <li><a href="#features" 
                           class="text-gray-400 text-sm hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 rounded-md px-1 py-0.5"
                           aria-label="Navigate to features section"
                           itemprop="url">Features</a></li>
                    <li><a href="#how-it-works" 
                           class="text-gray-400 text-sm hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 rounded-md px-1 py-0.5"
                           aria-label="Navigate to how it works section"
                           itemprop="url">How It Works</a></li>
                    <li><a href="#tech-stack" 
                           class="text-gray-400 text-sm hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 rounded-md px-1 py-0.5"
                           aria-label="Navigate to tech stack section"
                           itemprop="url">Tech Stack</a></li>
                    <li><a href="#support" 
                           class="text-gray-400 text-sm hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 rounded-md px-1 py-0.5"
                           aria-label="Navigate to support section"
                           itemprop="url">Support</a></li>
                    <li><a href="#team" 
                           class="text-gray-400 text-sm hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 rounded-md px-1 py-0.5"
                           aria-label="Navigate to team section"
                           itemprop="url">Team</a></li>
                </ul>
            </nav>
            
            <!-- Center Right - Social Media and Legal -->
            <div class="col-span-1 md:col-span-1">
                <!-- Social Media Section -->
                <section role="region" aria-label="Social media links">
                    <h4 class="text-white font-semibold mb-4">Our Social Media</h4>
                    <ul class="space-y-3" role="list">
                        <li>
                            <a href="https://www.linkedin.com/company/108121220/" 
                               target="_blank"
                               rel="noopener noreferrer nofollow"
                               class="text-gray-400 text-sm hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 rounded-md px-1 py-0.5"
                               aria-label="Follow Pacebeats on LinkedIn - Opens in new tab">
                                <span aria-hidden="true">ðŸ’¼</span> LinkedIn
                            </a>
                        </li>
                        <li>
                            <a href="https://www.facebook.com/profile.php?id=61579093551639" 
                               target="_blank"
                               rel="noopener noreferrer nofollow"
                               class="text-gray-400 text-sm hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 rounded-md px-1 py-0.5"
                               aria-label="Follow Pacebeats on Facebook - Opens in new tab">
                                <span aria-hidden="true">ðŸ“˜</span> Facebook
                            </a>
                        </li>
                    </ul>
                </section>

                <!-- Legal Section -->
                <section role="region" aria-label="Legal information" class="mt-6">
                    <h4 class="text-white font-semibold mb-4">Legal</h4>
                    <ul class="space-y-3" role="list">
                        <li>
                            <button 
                                id="termsBtn" 
                                class="text-gray-400 text-sm hover:text-white transition-colors text-left focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 rounded-md px-1 py-0.5"
                                type="button"
                                aria-label="View terms and conditions"
                                aria-expanded="false"
                                aria-controls="termsModal"
                            >
                                <span aria-hidden="true">ðŸ“‹</span> Terms and Conditions
                            </button>
                        </li>
                        <li>
                            <button 
                                id="privacyBtn" 
                                class="text-gray-400 text-sm hover:text-white transition-colors text-left focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 rounded-md px-1 py-0.5"
                                type="button"
                                aria-label="View privacy policy"
                                aria-expanded="false"
                                aria-controls="privacyModal"
                            >
                                <span aria-hidden="true">ðŸ”’</span> Privacy Policy
                            </button>
                        </li>
                    </ul>
                </section>
            </div>
            
            <!-- Right - App Download -->
            <section class="col-span-2 md:col-span-1" 
                     role="region" 
                     aria-label="App download information">
                <h4 class="text-white font-semibold text-center md:text-left mb-4">Get the app</h4>
                <p class="text-gray-400 text-sm text-center md:text-left mb-6 leading-relaxed">
                    Download now to start tracking with precision, and 
                    join challenges with your crew.
                </p>
                <button 
                    class="flex items-center bg-white text-black px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors w-full justify-center focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50"
                    type="button"
                    disabled
                    aria-label="App download coming soon - Currently in development"
                >
                    <span aria-hidden="true">ðŸš§</span> In Progress
                </button> 
                
                <!-- Copyright -->
                <p class="text-gray-400 text-center md:text-left text-sm my-6 leading-relaxed">
                    <span aria-hidden="true">Â©</span> 2025 Pacebeats. All rights reserved.
                </p>
            </section>
        </div>
    </div>
</footer>

<!-- Terms Modal -->
<TermsModal />

<!-- Privacy Modal -->
<PrivacyModal />

<!-- JSON-LD Structured Data for Organization -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Pacebeats",
    "description": "Running companion app that syncs every stride with the perfect beat",
    "url": "https://www.pacebeats.top",
    "logo": "https://www.pacebeats.top/favicon.png",
    "sameAs": [
        "https://www.linkedin.com/company/108121220/",
        "https://www.facebook.com/profile.php?id=61579093551639",
        "https://github.com/KpG782",
        "https://buymeacoffee.com/Loki123"
    ],
    "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "customer service",
        "email": "pacebeatsspacebeats213@gmail.com",
        "url": "https://www.pacebeats.top"
    },
    "foundingDate": "2024",
    "founder": {
        "@type": "Person",
        "name": "Pacebeats Team"
    }
}
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const termsBtn = document.getElementById('termsBtn');
        const termsModal = document.getElementById('termsModal');
        const privacyBtn = document.getElementById('privacyBtn');
        const privacyModal = document.getElementById('privacyModal');
        
        // Enhanced modal opening with accessibility
        function openModal(modal: Element | null, button: Element | null) {
            if (modal && button) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                button.setAttribute('aria-expanded', 'true');
                
                // Focus the modal
                const closeButton = modal.querySelector('[id*="close"]') as HTMLElement;
                if (closeButton) {
                    closeButton.focus();
                }
                
                // Announce to screen readers
                const announcement = document.createElement('div');
                announcement.setAttribute('aria-live', 'polite');
                announcement.className = 'sr-only';
                announcement.textContent = 'Modal opened';
                document.body.appendChild(announcement);
                
                setTimeout(() => {
                    if (document.body.contains(announcement)) {
                        document.body.removeChild(announcement);
                    }
                }, 1000);
            }
        }
        
        termsBtn?.addEventListener('click', function() {
            openModal(termsModal, termsBtn);
        });

        privacyBtn?.addEventListener('click', function() {
            openModal(privacyModal, privacyBtn);
        });
        
        // Keyboard navigation for buttons
        [termsBtn, privacyBtn].forEach(btn => {
            btn?.addEventListener('keydown', (e: KeyboardEvent) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    btn.click();
                }
            });
        });
        
        // Enhanced smooth scrolling for footer links
        document.querySelectorAll('footer a[href^="#"]').forEach(link => {
            link.addEventListener('click', function(this: HTMLAnchorElement, e: Event) {
                e.preventDefault();
                const href = this.getAttribute('href');
                if (href && href !== '#') {
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                        
                        // Set focus for accessibility
                        setTimeout(() => {
                            target.setAttribute('tabindex', '-1');
                            (target as HTMLElement).focus();
                        }, 1000);
                    }
                }
            });
        });
    });
</script>

<style>
    /* Enhanced accessibility styles */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }
    
    /* Footer full width fixes */
    footer {
        width: 100% !important;
        max-width: 100vw !important;
        margin: 0 !important;
        box-sizing: border-box;
    }
    
    /* Ensure proper container spacing */
    footer .max-w-7xl {
        width: 100%;
        margin-left: auto;
        margin-right: auto;
    }
    
    /* Mobile responsive adjustments */
    @media (max-width: 768px) {
        footer {
            padding-bottom: 4rem;
        }
        
        footer .px-6 {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        
        footer .grid {
            gap: 1.5rem;
        }
        
        /* Stack columns on mobile */
        footer .grid-cols-2 {
            grid-template-columns: 1fr;
        }
        
        /* Center content on mobile */
        footer .col-span-2 {
            text-align: center;
        }
        
        footer .col-span-1 {
            text-align: center;
        }
    }
    
    /* Tablet adjustments */
    @media (min-width: 769px) and (max-width: 1023px) {
        footer .grid {
            gap: 2rem;
        }
    }
    
    /* Enhanced footer link hover effects */
    footer a:hover,
    footer button:hover {
        transform: translateX(2px);
        transition: all 0.3s ease;
    }
    
    /* Button hover effects */
    footer button:hover:not(:disabled) {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
    }
    
    /* Disabled button styles */
    footer button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }
    
    footer button:disabled:hover {
        transform: none;
        box-shadow: none;
    }
    
    /* High contrast mode support */
    @media (prefers-contrast: high) {
        footer {
            border-top: 2px solid #ffffff;
        }
        
        .text-gray-400 {
            color: #ffffff;
        }
        
        footer a,
        footer button {
            border: 1px solid transparent;
        }
        
        footer a:focus,
        footer button:focus {
            border-color: #ffffff;
            background-color: rgba(255, 255, 255, 0.1);
        }
    }
    
    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
        footer a,
        footer button {
            transition: none;
        }
        
        footer a:hover,
        footer button:hover {
            transform: none;
        }
    }
    
    /* Focus indicators for better accessibility */
    footer a:focus-visible,
    footer button:focus-visible {
        outline: 2px solid #ffffff;
        outline-offset: 2px;
        border-radius: 2px;
    }
</style>